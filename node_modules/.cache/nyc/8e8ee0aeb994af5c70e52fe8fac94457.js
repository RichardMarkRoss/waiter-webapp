var cov_17ua9jwo0s=function(){var path="/home/coder/projects/Registrations-web-app/reg-database-function.js",hash="32d9938144b0a530a6b90a3ed623a81b09bd7eb8",Function=function(){}.constructor,global=new Function('return this')(),gcv="__coverage__",coverageData={path:"/home/coder/projects/Registrations-web-app/reg-database-function.js",statementMap:{"0":{start:{line:1,column:0},end:{line:40,column:2}},"1":{start:{line:3,column:26},end:{line:3,column:66}},"2":{start:{line:4,column:8},end:{line:4,column:30}},"3":{start:{line:8,column:18},end:{line:8,column:23}},"4":{start:{line:9,column:27},end:{line:9,column:41}},"5":{start:{line:10,column:31},end:{line:10,column:46}},"6":{start:{line:11,column:25},end:{line:11,column:105}},"7":{start:{line:12,column:23},end:{line:12,column:42}},"8":{start:{line:13,column:8},end:{line:13,column:104}},"9":{start:{line:16,column:28},end:{line:16,column:102}},"10":{start:{line:17,column:8},end:{line:17,column:32}},"11":{start:{line:20,column:23},end:{line:20,column:112}},"12":{start:{line:21,column:8},end:{line:21,column:27}},"13":{start:{line:24,column:8},end:{line:24,column:54}},"14":{start:{line:25,column:8},end:{line:25,column:74}},"15":{start:{line:28,column:24},end:{line:28,column:170}},"16":{start:{line:29,column:8},end:{line:29,column:28}},"17":{start:{line:32,column:4},end:{line:39,column:6}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:1,column:17},end:{line:1,column:18}},loc:{start:{line:1,column:33},end:{line:40,column:1}},line:1},"1":{name:"regSelectPlates",decl:{start:{line:2,column:19},end:{line:2,column:34}},loc:{start:{line:2,column:38},end:{line:5,column:5}},line:2},"2":{name:"filterReg",decl:{start:{line:6,column:19},end:{line:6,column:28}},loc:{start:{line:6,column:37},end:{line:14,column:5}},line:6},"3":{name:"checkIfSame",decl:{start:{line:15,column:19},end:{line:15,column:30}},loc:{start:{line:15,column:39},end:{line:18,column:5}},line:15},"4":{name:"regResults",decl:{start:{line:19,column:19},end:{line:19,column:29}},loc:{start:{line:19,column:39},end:{line:22,column:5}},line:19},"5":{name:"clearDataBase",decl:{start:{line:23,column:19},end:{line:23,column:32}},loc:{start:{line:23,column:36},end:{line:26,column:5}},line:23},"6":{name:"regCheckList",decl:{start:{line:27,column:19},end:{line:27,column:31}},loc:{start:{line:27,column:40},end:{line:30,column:5}},line:27}},branchMap:{},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0},b:{},_coverageSchema:"d34fc3e6b8297bcde183f5492bcb8fcb36775295"},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();cov_17ua9jwo0s.s[0]++;module.exports=function(pool){cov_17ua9jwo0s.f[0]++;async function regSelectPlates(){cov_17ua9jwo0s.f[1]++;const regSelect=(cov_17ua9jwo0s.s[1]++,await pool.query('select * from towns;'));cov_17ua9jwo0s.s[2]++;return regSelect.rows;}async function filterReg(plate){cov_17ua9jwo0s.f[2]++;// function inserts and filter the plates to match the first tables values
let reg=(cov_17ua9jwo0s.s[3]++,plate);let splittingReg=(cov_17ua9jwo0s.s[4]++,reg.split(' '));const regNumberStart=(cov_17ua9jwo0s.s[5]++,splittingReg[0]);const townData=(cov_17ua9jwo0s.s[6]++,await pool.query('select * from towns where towns_names = $1',[regNumberStart]));const townId=(cov_17ua9jwo0s.s[7]++,townData.rows[0].id);cov_17ua9jwo0s.s[8]++;await pool.query('insert into number_plates (plates, towns_id) values ($1, $2)',[reg,townId]);}async function checkIfSame(plate){cov_17ua9jwo0s.f[3]++;const platesCheck=(cov_17ua9jwo0s.s[9]++,await pool.query('select * from number_plates where plates = $1',[plate]));cov_17ua9jwo0s.s[10]++;return platesCheck.rows;}async function regResults(plates){cov_17ua9jwo0s.f[4]++;const Result=(cov_17ua9jwo0s.s[11]++,await pool.query('SELECT plates FROM number_plates GROUP BY plates HAVING COUNT(*) > 0 '));cov_17ua9jwo0s.s[12]++;return Result.rows;}async function clearDataBase(){cov_17ua9jwo0s.f[5]++;cov_17ua9jwo0s.s[13]++;await pool.query('delete from number_plates');cov_17ua9jwo0s.s[14]++;await pool.query('alter sequence number_plates_id_seq restart 1');}async function regCheckList(plate){cov_17ua9jwo0s.f[6]++;const listReg=(cov_17ua9jwo0s.s[15]++,await pool.query('select towns_names, plates from towns join number_plates on towns.id = number_plates.towns_id where towns_names = $1 ',[plate]));cov_17ua9jwo0s.s[16]++;return listReg.rows;}cov_17ua9jwo0s.s[17]++;return{regSelectPlates,filterReg,clearDataBase,regResults,regCheckList,checkIfSame};};